{"ast":null,"code":"'use strict';\n\nconst Connection = require('../index.js').Connection;\nclass PoolConnection extends Connection {\n  constructor(pool, options) {\n    super(options);\n    this._pool = pool;\n    // The last active time of this connection\n    this.lastActiveTime = Date.now();\n    // When a fatal error occurs the connection's protocol ends, which will cause\n    // the connection to end as well, thus we only need to watch for the end event\n    // and we will be notified of disconnects.\n    // REVIEW: Moved to `once`\n    this.once('end', () => {\n      this._removeFromPool();\n    });\n    this.once('error', () => {\n      this._removeFromPool();\n    });\n  }\n  release() {\n    if (!this._pool || this._pool._closed) {\n      return;\n    }\n    // update last active time\n    this.lastActiveTime = Date.now();\n    this._pool.releaseConnection(this);\n  }\n  promise(promiseImpl) {\n    const PromisePoolConnection = require('../promise').PromisePoolConnection;\n    return new PromisePoolConnection(this, promiseImpl);\n  }\n  end() {\n    const err = new Error('Calling conn.end() to release a pooled connection is ' + 'deprecated. In next version calling conn.end() will be ' + 'restored to default conn.end() behavior. Use ' + 'conn.release() instead.');\n    this.emit('warn', err);\n    // eslint-disable-next-line no-console\n    console.warn(err.message);\n    this.release();\n  }\n  destroy() {\n    this._removeFromPool();\n    super.destroy();\n  }\n  _removeFromPool() {\n    if (!this._pool || this._pool._closed) {\n      return;\n    }\n    const pool = this._pool;\n    this._pool = null;\n    pool._removeConnection(this);\n  }\n}\nPoolConnection.statementKey = Connection.statementKey;\nmodule.exports = PoolConnection;\n\n// TODO: Remove this when we are removing PoolConnection#end\nPoolConnection.prototype._realEnd = Connection.prototype.end;","map":{"version":3,"names":["Connection","require","PoolConnection","constructor","pool","options","_pool","lastActiveTime","Date","now","once","_removeFromPool","release","_closed","releaseConnection","promise","promiseImpl","PromisePoolConnection","end","err","Error","emit","console","warn","message","destroy","_removeConnection","statementKey","module","exports","prototype","_realEnd"],"sources":["C:/Users/LENOVO/Documents/digt2107-mass-splitter/client/node_modules/mysql2/lib/pool_connection.js"],"sourcesContent":["'use strict';\r\n\r\nconst Connection = require('../index.js').Connection;\r\n\r\nclass PoolConnection extends Connection {\r\n  constructor(pool, options) {\r\n    super(options);\r\n    this._pool = pool;\r\n    // The last active time of this connection\r\n    this.lastActiveTime = Date.now();\r\n    // When a fatal error occurs the connection's protocol ends, which will cause\r\n    // the connection to end as well, thus we only need to watch for the end event\r\n    // and we will be notified of disconnects.\r\n    // REVIEW: Moved to `once`\r\n    this.once('end', () => {\r\n      this._removeFromPool();\r\n    });\r\n    this.once('error', () => {\r\n      this._removeFromPool();\r\n    });\r\n  }\r\n\r\n  release() {\r\n    if (!this._pool || this._pool._closed) {\r\n      return;\r\n    }\r\n    // update last active time\r\n    this.lastActiveTime = Date.now();\r\n    this._pool.releaseConnection(this);\r\n  }\r\n\r\n  promise(promiseImpl) {\r\n    const PromisePoolConnection = require('../promise').PromisePoolConnection;\r\n    return new PromisePoolConnection(this, promiseImpl);\r\n  }\r\n\r\n  end() {\r\n    const err = new Error(\r\n      'Calling conn.end() to release a pooled connection is ' +\r\n        'deprecated. In next version calling conn.end() will be ' +\r\n        'restored to default conn.end() behavior. Use ' +\r\n        'conn.release() instead.'\r\n    );\r\n    this.emit('warn', err);\r\n    // eslint-disable-next-line no-console\r\n    console.warn(err.message);\r\n    this.release();\r\n  }\r\n\r\n  destroy() {\r\n    this._removeFromPool();\r\n    super.destroy();\r\n  }\r\n\r\n  _removeFromPool() {\r\n    if (!this._pool || this._pool._closed) {\r\n      return;\r\n    }\r\n    const pool = this._pool;\r\n    this._pool = null;\r\n    pool._removeConnection(this);\r\n  }\r\n}\r\n\r\nPoolConnection.statementKey = Connection.statementKey;\r\nmodule.exports = PoolConnection;\r\n\r\n// TODO: Remove this when we are removing PoolConnection#end\r\nPoolConnection.prototype._realEnd = Connection.prototype.end;\r\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,UAAU,GAAGC,OAAO,CAAC,aAAa,CAAC,CAACD,UAAU;AAEpD,MAAME,cAAc,SAASF,UAAU,CAAC;EACtCG,WAAWA,CAACC,IAAI,EAAEC,OAAO,EAAE;IACzB,KAAK,CAACA,OAAO,CAAC;IACd,IAAI,CAACC,KAAK,GAAGF,IAAI;IACjB;IACA,IAAI,CAACG,cAAc,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;IAChC;IACA;IACA;IACA;IACA,IAAI,CAACC,IAAI,CAAC,KAAK,EAAE,MAAM;MACrB,IAAI,CAACC,eAAe,CAAC,CAAC;IACxB,CAAC,CAAC;IACF,IAAI,CAACD,IAAI,CAAC,OAAO,EAAE,MAAM;MACvB,IAAI,CAACC,eAAe,CAAC,CAAC;IACxB,CAAC,CAAC;EACJ;EAEAC,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC,IAAI,CAACN,KAAK,IAAI,IAAI,CAACA,KAAK,CAACO,OAAO,EAAE;MACrC;IACF;IACA;IACA,IAAI,CAACN,cAAc,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;IAChC,IAAI,CAACH,KAAK,CAACQ,iBAAiB,CAAC,IAAI,CAAC;EACpC;EAEAC,OAAOA,CAACC,WAAW,EAAE;IACnB,MAAMC,qBAAqB,GAAGhB,OAAO,CAAC,YAAY,CAAC,CAACgB,qBAAqB;IACzE,OAAO,IAAIA,qBAAqB,CAAC,IAAI,EAAED,WAAW,CAAC;EACrD;EAEAE,GAAGA,CAAA,EAAG;IACJ,MAAMC,GAAG,GAAG,IAAIC,KAAK,CACnB,uDAAuD,GACrD,yDAAyD,GACzD,+CAA+C,GAC/C,yBACJ,CAAC;IACD,IAAI,CAACC,IAAI,CAAC,MAAM,EAAEF,GAAG,CAAC;IACtB;IACAG,OAAO,CAACC,IAAI,CAACJ,GAAG,CAACK,OAAO,CAAC;IACzB,IAAI,CAACZ,OAAO,CAAC,CAAC;EAChB;EAEAa,OAAOA,CAAA,EAAG;IACR,IAAI,CAACd,eAAe,CAAC,CAAC;IACtB,KAAK,CAACc,OAAO,CAAC,CAAC;EACjB;EAEAd,eAAeA,CAAA,EAAG;IAChB,IAAI,CAAC,IAAI,CAACL,KAAK,IAAI,IAAI,CAACA,KAAK,CAACO,OAAO,EAAE;MACrC;IACF;IACA,MAAMT,IAAI,GAAG,IAAI,CAACE,KAAK;IACvB,IAAI,CAACA,KAAK,GAAG,IAAI;IACjBF,IAAI,CAACsB,iBAAiB,CAAC,IAAI,CAAC;EAC9B;AACF;AAEAxB,cAAc,CAACyB,YAAY,GAAG3B,UAAU,CAAC2B,YAAY;AACrDC,MAAM,CAACC,OAAO,GAAG3B,cAAc;;AAE/B;AACAA,cAAc,CAAC4B,SAAS,CAACC,QAAQ,GAAG/B,UAAU,CAAC8B,SAAS,CAACZ,GAAG","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}